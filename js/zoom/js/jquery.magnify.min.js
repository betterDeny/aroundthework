!function(n){n.fn.magnify=function(e){var a,t,o,r,i=n.extend({debug:!1,speed:100,onload:function(){}},e),s=0,l=0,f=function(e){o=n(e),a=o.parents("a"),d(o.attr("data-magnify-src")||i.src||a.attr("href")||"")},d=function(e,f){if(e){var g=new Image;n(g).on({load:function(){o.css("display","block"),o.parent(".magnify").length||o.wrap('<div class="magnify"></div>'),t=o.parent(".magnify"),o.prev(".magnify-lens").length?t.children(".magnify-lens").css("background-image","url("+e+")"):o.before('<div class="magnify-lens loading" style="background:url('+e+') no-repeat 0 0"></div>'),r=t.children(".magnify-lens"),r.removeClass("loading"),s=g.width,l=g.height,i.debug&&console.log("[MAGNIFY] Got zoom image dimensions OK (width x height): "+s+" x "+l),g=null,i.onload(),t.mousemove(function(n){var e=t.offset(),a=n.pageX-e.left;if(nY=n.pageY-e.top,a<t.width()&&nY<t.height()&&a>0&&nY>0?r.fadeIn(i.speed):r.fadeOut(i.speed),r.is(":visible")){var f=a-r.width()/2,d=nY-r.height()/2;if(s&&l)var g=-1*Math.round(a/o.width()*s-r.width()/2),c=-1*Math.round(nY/o.height()*l-r.height()/2),h=g+"px "+c+"px";r.css({top:Math.round(d)+"px",left:Math.round(f)+"px",backgroundPosition:h||""})}}),a.length&&(a.css("display","inline-block"),(f||a.attr("href")&&!o.attr("data-magnify-src")&&!i.src)&&a.click(function(n){n.preventDefault()}))},error:function(){g=null,f?i.debug&&console.log("[MAGNIFY] Parent anchor zoom source is invalid also. Disabling zoom..."):(i.debug&&console.log("[MAGNIFY] Invalid data-magnify-src. Looking in parent anchor instead -> "+a.attr("href")),d(a.attr("href"),!0))}}),g.src=e}};return this.each(function(){f(this)})}}(jQuery);